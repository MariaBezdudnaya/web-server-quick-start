[Назад](../README.md)

## Краткое описание

Этот код представляет собой сервис `ConfigService`, который используется для чтения и извлечения данных конфигурации из JSON-файла.

## Подробное описание работы

`ConfigService` использует встроенный модуль Node.js, `fs`, для синхронного чтения файла конфигурации в формате JSON (`config.json`), расположенного в директории `./resources/`. Прочитанный файл конфигурации затем преобразуется в JavaScript-объект и хранится внутри `ConfigService`.

Пользователи этого сервиса могут получить доступ к любому ключу конфигурации, вызывая метод `get(key: string)`. Этот метод будет возвращать значение, соответствующее указанному ключу, из файла конфигурации.

## Зависимости

Этот сервис использует пакет `@nestjs/common` для использования декоратора `@Injectable()`, который помечает класс как класс, предназначенный для внедрения зависимостей. Также он использует встроенный в Node.js модуль `fs` для чтения файла конфигурации.

## Как запустить

`ConfigService` - это сервис Nest.js, который будет автоматически инициализирован и загружен при запуске приложения Nest.js, где он предоставлен как провайдер.

Как правило, приложения Nest.js запускаются командой `npm run start` или `nest start` в командной строке. После запуска `ConfigService` будет доступен для использования внутри вашего приложения, и вы сможете получить доступ к данным конфигурации, вызвав метод `get(key)`.

Обратите внимание, что для работы `ConfigService` необходимо, чтобы файл `config.json` был доступен в указанной директории и имел правильный формат JSON.

## Краткое описание

Ваш код представляет класс `DataService`, который является сервисом Nest.js. Этот сервис работает с данными, получаемыми по различным URL-адресам.

## Подробное описание работы

`DataService` инжектит в себя два сервиса: `ConfigService` и `HttpService`.

- `ConfigService` используется для получения информации о конфигурации, в частности, списка URL-адресов, с которых будут запрашиваться данные (`this.configService.get('urls')`).

- `HttpService`, предоставляемый `@nestjs/axios`, используется для выполнения HTTP-запросов.

В момент инициализации модуля сервис `DataService` загружает данные из различных источников (`this.loadData()`). Данные получаются из каждого URL-адреса, указанного в конфигурации, и сохраняются в кэше (`this.cache`), который представляет собой экземпляр Map. Каждые полученные данные также обрабатываются функцией-маппером, зависящей от ключа/типа данных.

Метод `getData(key: string)` используется для получения данных из кэша по ключу.

Метод `getMapper(key: string)` возвращает функцию-маппер в зависимости от типа данных (ключа). Преобразует полученные данные в определенный формат.

## Зависимости

Этот файл предполагает, что у вас установлен `@nestjs/common`, `@nestjs/axios`, `rxjs`, а также ваш собственный `ConfigService`.

## Как запустить

Это сервис, и он будет включен в ваше приложение Nest.js при использовании модуля, в котором он указан как провайдер. Как только ваше приложение Nest.js запущено, этот сервис также будет запущен и инициализирован автоматически. Запуск приложений Nest.js обычно осуществляется командой `npm run start` или `nest start` в командной строке.