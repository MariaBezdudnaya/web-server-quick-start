# Express Сервер
[Назад](../README.md)

Этот проект является примером сервера на Node.js, использующим Express фреймворк и CORS.

## Описание

Сервер поддерживает две основные функции:

1. Контролирование данных посредством ChartController и ConfigController.
2. Генерация API документации с помощью Swagger.

Сервер также использует внедрение зависимостей (DI) для предоставления сервисов ConfigService и DataService.

## Установка

Установите необходимые зависимости с помощью следующей команды:

```
npm install
```

## Запуск

Сервер можно запустить с помощью следующей команды:

```
npm start
```

Сервер будет запущен на порту 3000 или на порту, указанном в переменной окружения PORT.

## Контроллеры

### ChartController

ChartController используется для управления запросами, связанными с графиками.

### ConfigController

ConfigController используется для управления конфигурацией.

## Swagger API документация

Сервер автоматически генерирует API документацию с помощью Swagger. Документацию можно посмотреть, перейдя по ссылке `http://localhost:3000/api-docs`.

## Внедрение зависимостей (DI)

Сервер использует DI для предоставления сервисов ConfigService и DataService. Это облегчает управление зависимостями и повышает модульность и тестируемость кода.

### ConfigService

ConfigService используется для управления конфигурацией.

### DataService

DataService используется для загрузки и управления данными. DataService вызывается для инициализации на начальном этапе.

## Отправка запросов

Помимо размещения API документации, сервер также обрабатывает запросы на различные конечные точки, управляемые контроллерами.

Каждый контроллер имеет свои собственные маршруты, которые принимают различные типы запросов.

## Зависимости

Сервер использует следующие основные зависимости:

- `express`: Фреймворк для обработки запросов HTTP.
- `cors`: Middleware для обработки CORS.
- `swagger-jsdoc`: автоматическое создание документации API.
- `swagger-ui-express`: Middleware для предоставления пользовательского интерфейса Swagger.

# Dependency Injection (DI) Контроллер

Этот модуль реализует простой механизм внедрения зависимостей (DI) для предоставления и извлечения сервисов в вашем приложении.

## Описание

DI контроллер использует структуру данных Map для хранения фабрик (функций, создающих сервисы).
Этот контроллер предоставляет функции для предоставления сервисов, предоставления нескольких сервисов сразу и внедрения зависимостей.

## Методы

### provide(key, factory)

Функция `provide` принимает два аргумента: ключ и фабрику. Ключ - это идентификатор, который будет использоваться для извлечения соответствующего сервиса, а фабрика - это функция, которая создает и возвращает сервис.

Эта функция передает сервис в Map вместе с его ключом.

### provideService(...services)

Функция `provideService` принимает список пар [ключ, сервис] и использует функцию `provide` для предоставления каждого сервиса. Это позволяет предоставлять несколько сервисов одновременно.

### inject(key)

Функция `inject` принимает ключ и возвращает сервис, соответствующий этому ключу из Map.

Если сервис для данного ключа не найден, функция генерирует ошибку.

## Пример использования

```javascript
import {provide, inject, provideService} from './di.js';

class MyService {
    constructor() {...}
    myMethod() {...}
}

provide('MyService', () => new MyService());
const myService = inject('MyService');
```

## Преимущества и недостатки

### Преимущества

* Повышение модульности: Сервисы можно легко заменять без изменения кода, который их использует.
* Облегчение тестирования: Мокирование сервисов для тестирования становится проще.

### Недостатки

* Усложнение кода: Необходимость описания и извлечения зависимостей может усложнить понимание кода.
* Ошибки разрешения зависимостей: Если зависимость не найдена, будет сгенерировано исключение. Это может привести к ошибкам во время выполнения.